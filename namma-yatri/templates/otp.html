{% extends 'base.html' %}

{% block content %}
<div class="h-full flex flex-col bg-white p-6">
    <!-- Green Circle with Checkmark -->
    <div class="flex justify-center mb-8">
        <div class="w-24 h-24 rounded-full bg-primary flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
    </div>
    
    <!-- OTP Entry -->
    <h1 class="text-2xl font-bold mb-8">Enter OTP</h1>
    
    <div class="flex justify-between gap-4 mb-8">
        <input type="text" maxlength="1" value="5" class="input input-bordered w-16 h-16 text-center text-2xl" readonly>
        <input type="text" maxlength="1" value="4" class="input input-bordered w-16 h-16 text-center text-2xl" readonly>
        <input type="text" maxlength="1" value="7" class="input input-bordered w-16 h-16 text-center text-2xl" readonly>
        <input type="text" maxlength="1" class="input input-bordered w-16 h-16 text-center text-2xl focus:border-primary focus:ring-primary" autofocus>
    </div>
    
    <p class="text-gray-400 text-center mb-8">Please ask rider for the OTP</p>
    
    <!-- Numeric Keypad -->
    <div class="grid grid-cols-3 gap-4">
        <button class="btn btn-outline h-16 text-xl">1</button>
        <button class="btn btn-outline h-16 text-xl">2</button>
        <button class="btn btn-outline h-16 text-xl">3</button>
        <button class="btn btn-outline h-16 text-xl">4</button>
        <button class="btn btn-outline h-16 text-xl">5</button>
        <button class="btn btn-outline h-16 text-xl">6</button>
        <button class="btn btn-outline h-16 text-xl">7</button>
        <button class="btn btn-outline h-16 text-xl">8</button>
        <button class="btn btn-outline h-16 text-xl">9</button>
        <button class="btn btn-outline h-16 text-xl">←</button>
        <button class="btn btn-outline h-16 text-xl">0</button>
        <button class="btn btn-primary h-16 text-xl text-white">✓</button>
    </div>
</div>

<script>
    // Handle keypad input
    const inputs = document.querySelectorAll('input');
    const buttons = document.querySelectorAll('.btn');
    let currentFocus = 3; // Focus on the last empty input
    
    // Set focus on the last empty input
    inputs[currentFocus].focus();
    
    buttons.forEach(button => {
        button.addEventListener('click', () => {
            const buttonText = button.textContent.trim();
            
            if (buttonText === '←') {
                // Handle backspace
                if (inputs[currentFocus].value === '' && currentFocus > 0) {
                    currentFocus--;
                    inputs[currentFocus].value = '';
                    inputs[currentFocus].focus();
                } else {
                    inputs[currentFocus].value = '';
                }
            } else if (buttonText === '✓') {
                // Handle submit
                alert('OTP verified successfully!');
                window.location.href = '/home';
            } else if (/^[0-9]$/.test(buttonText)) {
                // Handle number input
                inputs[currentFocus].value = buttonText;
                if (currentFocus < inputs.length - 1) {
                    currentFocus++;
                    inputs[currentFocus].focus();
                }
            }
        });
    });
</script>
{% endblock %}